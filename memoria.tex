%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Plantilla de memoria en LaTeX para la ETSIT - Universidad Rey Juan Carlos
%%
%% Por Gregorio Robles <grex arroba gsyc.urjc.es>
%%     Grupo de Sistemas y Comunicaciones
%%     Escuela Técnica Superior de Ingenieros de Telecomunicación
%%     Universidad Rey Juan Carlos
%% (muchas ideas tomadas de Internet, colegas del GSyC, antiguos alumnos...
%%  etc. Muchas gracias a todos)
%%
%% La última versión de esta plantilla está siempre disponible en:
%%     https://github.com/gregoriorobles/plantilla-memoria
%%
%% Para obtener PDF, ejecuta en la shell:
%%   make
%% (las imágenes deben ir en PNG o JPG)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper, 12pt]{book}
%\usepackage[T1]{fontenc}

\usepackage[a4paper, left=2.5cm, right=2.5cm, top=3cm, bottom=3cm]{geometry}
\usepackage{times}
\usepackage[latin1]{inputenc}
\usepackage[spanish]{babel}
\usepackage{url}
%\usepackage[dvipdfm]{graphicx}
\usepackage{graphicx}
\usepackage{float}  %% H para posicionar figuras
\usepackage[nottoc, notlot, notlof, notindex]{tocbibind} %% Opciones de índice
\usepackage{latexsym}  %% Logo LaTeX

\title{Memoria del Proyecto}
\author{Nombre del autor}

\renewcommand{\baselinestretch}{1.5}  %% Interlineado

\begin{document}

\renewcommand{\refname}{Bibliografía}  %% Renombrando
\renewcommand{\appendixname}{Apéndice}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PORTADA

\begin{titlepage}
\begin{center}
\begin{tabular}[c]{c c}
%\includegraphics[bb=0 0 194 352, scale=0.25]{logo} &
\includegraphics[scale=0.25]{img/logo_vect.png} &
\begin{tabular}[b]{l}
\Huge
\textsf{UNIVERSIDAD} \\
\Huge
\textsf{REY JUAN CARLOS} \\
\end{tabular}
\\
\end{tabular}

\vspace{3cm}

\Large
GRADO EN INGENIERÍA DE TELECOMUNICACIONES EN SISTEMAS AUDIOVISUALES Y MULTIMEDIA

\vspace{0.4cm}

\large
Curso Académico 2015/2016

\vspace{0.8cm}

Trabajo Fin de Grado

\vspace{2.5cm}

\LARGE
MEJORA DE LA PLATAFORMA DR. SCRATCH

\vspace{4cm}

\large
Autor : Eva Hu Garres \\
Tutor : Dr. Gregorio Robles \\
Co-Tutor: Jesús Moreno León
\end{center}
\end{titlepage}

\newpage
\mbox{}
\thispagestyle{empty} % para que no se numere esta pagina


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Dedicatoria

\chapter*{}
\pagenumbering{Roman} % para comenzar la numeracion de paginas en numeros romanos
\begin{flushright}
\textit{Dedicado a \\
mi familia / mi abuelo / mi abuela}
\end{flushright}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Agradecimientos

\chapter*{Agradecimientos}
%\addcontentsline{toc}{chapter}{Agradecimientos} % si queremos que aparezca en el índice
\markboth{AGRADECIMIENTOS}{AGRADECIMIENTOS} % encabezado 

Aquí vienen los agradecimientos\ldots Aunque está bien acordarse de la pareja,
no hay que olvidarse de dar las gracias a tu madre, que aunque a veces no lo 
parezca disfrutará tanto de tus logros como tú\ldots Además, la pareja quizás
no sea para siempre, pero tu madre sí.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Resumen

\chapter*{Resumen}
%\addcontentsline{toc}{chapter}{Resumen} % si queremos que aparezca en el índice
\markboth{RESUMEN}{RESUMEN} % encabezado

Aquí viene un resumen del proyecto. Ha de constar de tres o cuatro párrafos,
donde se presente de manera clara y concisa de qué va el proyecto. Han
de quedar respondidas las siguientes preguntas:

\begin{itemize}
  \item ¿De qué va este proyecto? ¿Cuál es su objetivo principal?
  \item ¿Cómo se ha realizado? ¿Qué tecnologías están involucradas?
  \item ¿En qué contexto se ha realizado el proyecto? ¿Es un proyecto
dentro de un marco general?
\end{itemize}

Lo mejor es escribir el resumen al final.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Resumen en inglés

\chapter*{Summary}
%\addcontentsline{toc}{chapter}{Summary} % si queremos que aparezca en el índice
\markboth{SUMMARY}{SUMMARY} % encabezado

Here comes a translation of the ``Resumen'' into English. Please, double check
it for correct grammar and spelling. As it is the translation of the ``Resumen'',
which is supposed to be written at the end, this as well should be filled out
just before submitting.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ÍNDICES %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Las buenas noticias es que los índices se generan automáticamente.
% Lo único que tienes que hacer es elegir cuáles quieren que se generen,
% y comentar/descomentar esa instrucción de LaTeX.

%%%% Índice de contenidos
\tableofcontents 
%%%% Índice de figuras
\cleardoublepage
%\addcontentsline{toc}{chapter}{Lista de figuras} % para que aparezca en el indice de contenidos
\listoffigures % indice de figuras
%%%% Índice de tablas
%\cleardoublepage
%\addcontentsline{toc}{chapter}{Lista de tablas} % para que aparezca en el indice de contenidos
%\listoftables % indice de tablas


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% INTRODUCCIÓN %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Introducción}
\label{sec:intro} % etiqueta para poder referenciar luego en el texto con ~\ref{sec:intro}
\pagenumbering{arabic} % para empezar la numeración de página con números

%
%Aquí quiero decir lo importante que es aprende a programar hoy en día aunque en un futuro no se dedique uno a ello, ya que es útil para aprender y mejorar en otras áreas del %conocimiento.
%

En la última década, el número de dispositivos electrónicos (móviles, tabletas, ordenadores...) ha aumentado exponencialmente, aumentando así el número de usuarios que los consumen. Es por ello que hoy en día y cada vez más, se va concienciando a los alumnos en las escuelas la importancia de la programación para un futuro a corto y largo plazo aunque uno no se vaya a dedicar específicamente a ello en un futuro. Aprender a programar es una manera ideal de estructurar los procesos mentales, ayudando a asentar conocimientos que ya se tenían y a aprender conceptos nuevos.

Actualmente, existe un movimiento mundial que está llevando la programación a las aulas desde primaria (Reino Unido, Estonia, EEUU...) haciendo que docentes de todo el mundo tengan que aprender a programar (si no saben todavía), enseñar a sus alumnos y evaluar los programas de sus alumnos. Es por ello que necesitan herramientas que les apoyen en todo el proceso. Así surge Dr. Scratch, como herramienta de apoyo a docentes y aprendices.

Un año hace desde que nació Dr. Scratch. Fue fruto de la inspiración de mi tutor de proyecto, Gregorio Robles, y mi co-tutor, Jesús Moreno, cuando buscaban un campo de investigación en el que basar su doctorado y pensaron que, ¿por qué no enseñar programación a los niños de forma divertida? 

Desde entonces, la plataforma ha cambiado mucho según se han ido haciendo encuestas y talleres. Gracias a la comunidad de usuarios que usan y/o han usado Dr. Scratch hemos podido seguir mejorando y creciendo en cada actualización. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% OBJETIVOS %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Objetivos}
\label{chap:objetivos}

\section{Objetivo general}

El objetivo de este proyecto es aportar realimentación sobre el nivel de pensamiento computacional de los proyectos realizados en el lenguaje de programación Scratch, enseñar buenas prácticas de programación y ofrecer una herramienta de apoyo para organizaciones y profesores a la hora de evaluar y ver la evolución de sus alumnos.


\section{Objetivos específicos}
\begin{itemize}
  \item Mejorar los paneles mostrados al analizar, con el fin de simplificar lo máximo posible la información mostrada al usuario, teniendo en cuenta que está dirigida principalmente a niños de distinta edad y nivel de pensamiento computacional.
  \item Web multilenguaje: traducir la web a las diferentes lenguas del mundo para acercarnos lo máximo posible al usuario final. Para ello, hemos contado con varios voluntarios de distintos países	 que han mostrado su interés en traducir la web a su idioma.
  \item Migrar el servidor a la nube para un ofrecer un mejor rendimiento.
  \item Registro de usuarios. Crear cuentas de organizaciones, profesores y alumnos, donde se pueda llevar un seguimiento de los proyectos analizados.
   \item Análisis masivo de proyectos.
   \item Crear una página de estadísticas generales y otra página de foro.
 \end{itemize}


\section{Planificación temporal}
label{sec:planificacion-temporal}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ESTADO DEL ARTE %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Estado del arte}

Actualmente existen varias herramientas que analizan estáticamente el código fuente de programas escritos en distintos lenguajes para ofrecer retroalimentación al usuario:
\begin{itemize}
	\item Pylint\footnote{\url{http://www.pylint.org}}: consiste en un analizado estático de código Python que se puede instalar en la línea de comandos y ofrece información sobre cómo de bien está escrito nuestro código  según la guía de estilos PEP-8 y muestra una serie de mensajes clasificados bajo las siguientes categorías:
	 \begin{itemize}
	 	\item Refactorización: Asociado a una violación en alguna buena práctica.
		\item Convención: Asociada a una violación al estándar de codificación.
		\item Advertencia: Asociadas a problemas de estilo o errores de programación menores.
		\item Error: Asociados a errores de programación importantes, es probable que se trate de un bug.
		\item Fatal: Asociados a errores que no permiten a Pylint avanzar en su análisis.
	 \newpage		
		\begin{figure}
  		\centering
 		 \includegraphics[width=5cm, keepaspectratio]{img/pylint1.jpg}
 		 \caption{Mensajes de salida de Pylint}
 		 \label{fig:Mensajes Pylint}
		\end{figure}
	 \end{itemize}
	
	 Finalmente, Pylint nos da una puntuación general de 0 a 10, alentando al programador a subir de puntuación y con ello, mejorar su código:
	
	 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=9cm, keepaspectratio]{img/pylint2.jpg}
 		 \caption{Puntuacion general Pylint}
 		 \label{fig:Puntuacion general Pylint}
	\end{figure}
	\item Scrape\footnote{\url{http://happyanalyzing.com/}}: consiste en un analizador de código Scratch en el cual se muestran los bloques de Scratch usados en el proyecto. Cuenta cuantas veces ha usado un determinado bloque, si ha usado listas, variables y cuántos objetos tiene, entre otros:
	 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=7cm, keepaspectratio]{img/scrape.jpg}
 		 \caption{Vista general de Scrape}
 		 \label{fig:Vista general de Scrape}
	\end{figure}
	 
	 
	 \newpage
	 \item Hairball\footnote{\url{https://github.com/ucsb-cs-education/hairball}}: consiste en un plugin de Python que analiza estáticamente proyectos de Scratch, ofreciendo a su salida la siguiente información:
	 	\begin{itemize}
			\item Habilidades generales del pensamiento computacional (abstracción, paralelismo, lógica, sincronización, control de flujo, interactividad con el usuario y representación de los datos).
			\item Malos hábitos de programación: programas duplicados, código muerto, nombrado de objetos e inicialización de atributos.
			\item De todas las habilidades y hábitos mostrados anteriormente, los plugins Mastery (nos da una puntuación global sobre 21), código repetido y nombrado de objetos han sido desarrollados por Jesús Moreno\footnote{\url{https://github.com/jemole/hairball}}
		\end{itemize}
\end{itemize}

\section{Python} 
Es un lenguaje de programación interpretado, con una sintaxis sencilla y legible. Soporta orientación a objetos, programación imperativa y, en menor medida, programación funcional. 
Fue creado por Guido van Rossum a finales de los ochenta y el nombre del lenguaje se debe a los humoristas británicos "Monty Python".
(FIXME: No sé si decir algo más.)

\section{Django} 
Es un framework web que permite construir aplicaciones web con Python como lenguaje de back-end más rápido y con menos código. Su patrón de arquitectura de software es MVC, Modelo-Vista-Controlador\footnote{\url{http://www.djangobook.com/}}:
	\begin{itemize}
			\item Modelo: contiene el núcleo de la aplicación.
			\item Vista: presenta la información obtenida del Modelo.
			\item Controlador: reacciona a interacciones del usuario.
	\end{itemize}
	 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=7cm, keepaspectratio]{img/django.jpg}
 		 \caption{MVC de Django}
 		 \label{fig:MVC de Django}
	\end{figure}

\section{Bootstrap} 
Es un conjunto de herramientas de software libre para el diseño de sitios y aplicaciones web. Permite crear de forma muy sencilla elementos comunes de todo sitio web: botones, formularios, barras de navegación, etc.\footnote{\url{http://getbootstrap.com}}

\section{MySQL} 
Es un sistema de gestión de bases de datos relacional desarrollado por Oracle. Funciona bien en sitios de mucho tráfico y permite múltiples consultas al mismo tiempo.
(FIXME: No sé qué más decir.)
\section{Hairball} 
(FIXME: Como lo he mencionado arriba no sé si volver a explicarlo.)

\section{Scratch} 
Es un pseudo-lenguaje de programación basado en bloques, orientado a la enseñanza principalmente mediante la creación de videojuegos. La forma de programar en Scratch permite al usuario aprender rápidamente sin tener que aprender la sintaxis del lenguaje, centrándose en la lógica del programa. Scratch es, además, una gran comunidad de usuarios de los que aprender y con los que compartir los proyectos que se van creando.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DISEÑO E IMPLEMENTACIÓN %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Diseño e implementación}

\section{Arquitectura general}
A continuación se muestra la arquitectura general de Dr. Scratch:
	 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=11cm, keepaspectratio]{img/arquitectura.jpg}
 		 \caption{Arquitectura general}
 		 \label{fig:Arquitectura general Dr. Scratch}
	\end{figure}
Cuando el servidor de Dr. Scratch recibe una petición HTTP, por ejemplo, drscratch.org/alguna-url, dicha petición es manejada por el archivo urls.py, que contiene todas las urls drscratch/algo. El archivo urls.py va mirando cada una de la urls que tiene en su lista y si la encuentra la enlaza con la función de views.py asociada. Si no encuentra la url, optará por coger la última. Una vez encontrada la url y la función de views.py asociada, ejecuta dicha función, al final de la cual devolverá un HttpResponse y con ello una plantilla HTML.

\section{Diseño e implementación del back-end}
	\subsection{Nuevos dashboards}
	
	A lo largo de todo un año de trabajo, hemos realizado varios talleres tanto con alumnos como con docentes. Gracias a sus sugerencias hemos ido mejorando las pantallas mostradas al analizar proyectos.
	A continuación se muestra una primera versión:
	 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=10cm, keepaspectratio]{img/dashboard1.jpg}
 		 \caption{Primera version del dashboard.}
 		 \label{fig:Primera version del dashboard.}
	\end{figure}
	
	Esta primera versión del dashboard se muestra para todos los niveles la misma información.
	
	Después, se mostraban distintos dashboards y distinta información en función del nivel. Si el nivel era bajo se mostraba menos información y si el nivel era alto se mostraba más información:
	
	(FIXME: Pedir los dashboards de Mari Luz).
	
	Finalmente nos dimos cuenta de que los más pequeños no sabían usar el scroll del ratón y por lo tanto, diseñamos unas nuevas pantallas que mostraran toda la información en una pantalla, sin necesidad de bajar con el ratón. 
			
	\subsection{Estadísticas} 
	Se ha creado una página de estadísticas donde se podrá consultar:
	\begin{itemize}
		\item Puntuación media diaria.
		\item Porcentaje de niveles.
		\item Número de proyectos analizados cada día.
		\item Puntuación media por habilidad.
		\item Puntuación media por mal hábito.
	\end{itemize}
	
	Dicha página se actualiza cada noche mediante la creación de un nuevo comando en Django, ejecutando python manage.py mystats en la linea de comandos como una tarea programada. Esto se ha realizado mediante la creación de las carpetas y archivos siguientes:
	(FIXME: corregir esto -> Duda Gregorio)
	app/ \newline
		|  management\/ \newline
			 \_ __init__.py \newline
			 \_ commands\/ \newline
				|\_ __init__.py \newline
				| \_ mystats.py
	
	Es en "mystats.py" donde realizaremos todos los promedios y los guardaremos en la base de datos. Haciendo así las estadísticas, evitamos tener que realizar todos los promedios en tiempo real cada vez que se visita la página, quitando carga al servidor.
	A su vez, se ha creado una función en el archivo views.py llamada, "statistics", que consultará los datos en la base de datos y formará un diccionario para devolverlo en un objeto HTTP.
	La función "mystats.py" está estructurada de la siguiente manera:
		\begin{figure}[H]
  		\centering
 		 \includegraphics[width=12cm, keepaspectratio]{img/esquemaStatistics.jpg}
 		 \caption{Esquema de la funcion Statistics.}
 		 \label{fig:Esquema de la funcion Statistics.}
	\end{figure}
				
	En el esquema de arriba podemos ver cómo se generan las estadísticas. En primer lugar, inicializamos las variables, diccionarios y listas y creamos una lista de fechas, desde una que indiquemos hasta el día de hoy. Después vamos recorriendo esa lista de fechas, consultando en la BBDD y recogiendo los siguientes datos:
		\begin{itemize}
			\item Media de puntuación diaria.
			\item Número de proyectos analizados cada día.
			\item Todas las puntuaciones.
		\end{itemize}
		
	Una vez hecho esto, contamos el número total de proyectos y el número de proyectos que se encuentra en cada nivel (bajo, medio, alto) para poder generar una gráfica en forma de "quesito". 
	Finalmente calculamos la puntuación media por habilidad del pensamiento computacional y por malas prácticas, y guardamos en la BBDD.
	
	Haciéndolo de esta manera, la función alojada en views.py mencionada anteriormente, sólo tiene que consultar la BBDD para obtener las estadísticas y devolverlas en un diccionario en la respuesta HTTP.
	
	
	\subsection{Organizaciones} 
	
		\begin{itemize}
					\item Registro de usuarios
					\item Restauración de contraseña
					\item Análisis masivo: csv(traducción de diccionarios)
				\end{itemize}
	
	\subsection{Modificación del procesador de Dead Code} 
	Debido a que se ha modificado el plugin de Dead Code de Hairball, la salida que ofrecía dicho plugin ya no es la misma que la de antes. Por ello se ha tenido que modificar el procesador de dicho plugin para poder mostrarlo correctamente en el dashboard. 
	Antes la salida que daba el plugin era:
	
	\begingroup
		\fontsize{7pt}{8pt}\selectfont
			\begin{verbatim}
$ hairball -p blocks.DeadCode Testing.sb2 
Testing.sb2
{u'Witch': [kurt.Script([
    kurt.Block('forward:', 10),
    kurt.Block('turnRight:', 15)], pos=(32, 287))]}  
    			\end{verbatim}
	\endgroup
	Y actualmente es:
	\begingroup
		\fontsize{7pt}{8pt}\selectfont
			\begin{verbatim}
				
$ hairball -p blocks.DeadCode Testing.sb2 
Testing.sb2
{u'Witch': [['move %s steps', 'turn @turnRight %s degrees']]}

    			\end{verbatim}
	\endgroup

	Se modificado el procesador de Dead Code de tal manera que se convierte a diccionario todo lo que hay a partir de la tercera línea mediante la función "ast.literal_eval" .

	 Después, se recopilan todas las claves del diccionario, que serán todos los objetos donde hay código muerto y conforme se va recorriendo el objeto y contando los bloques que no se ejecutan, se va formando un string con el formato: " objeto: número de bloques que no se ejecutan " . Finalmente se guarda en la base de datos y se forma un diccionario con dos claves: "blocks" y "total" para entregarlo en una respuesta HTTP al analizar un proyecto.
	Por ejemplo:
	 \begin{figure}[H]
  		\centering
		\includegraphics[width=10cm, keepaspectratio]{img/ejemploDeadCode.jpg}
 		 \includegraphics[width=10cm, keepaspectratio]{img/esquemaDeadCode.jpg}
 		 \caption{Esquema DeadCode.}
 		 \label{fig:Esquema DeadCode.}
	\end{figure}
	En la figura de arriba vemos un ejemplo de lo que devolvería el plugin de Hairball "Dead Code". El procesador que se ha desarrollado calcularía la longitud de la sub-lista asociada a Witch, en este caso, dos programas que no se ejecutan y el objeto "Ghost"  tendría otros dos. 
	
	\subsection{Foro} 
	
	Dr. Scratch tiene una cuenta Twitter y en Wordpress, donde se interactúa con los diferentes usuarios y se escriben entradas sobre los talleres que realizamos o las actualizaciones de la web. Sin embargo, queríamos incluir una parte de foro donde la gente que use Dr. Scratch pueda opinar sobre él. Para ello, se creó la función "discuss" en el fichero views.py.
	Dicha función tiene dos partes: si la petición es un GET, en el caso de mostrar mensajes, o es un POST, en el caso de comentar.
	Para poder comentar en el foro deberemos estar registrados. De esta manera evitamos tener que poner algún tipo de CAPTCHA(FIXME: existe algún ataque relacionado por recibir muchos comentarios con SPAM?Indicarlo aquí.)
	
	\begin{figure}[H]
  		\centering
 		 \includegraphics[width=10cm, keepaspectratio]{img/esquemaForo.jpg}
 		 \caption{Esquema Foro.}
 		 \label{fig:Esquema Foro.}
	\end{figure}
		
	En esta función primero comprobamos si el formulario está bien completado, se guardará el comentario en la base de datos. Cabe destacar que el usuario sólo podrá comentar si está registrado.
	Después se recopilan todos los comentarios y se ordenan de forma que el primero sea el más nuevo (por fecha) y el último sea el más antiguo. Finalmente se crea un diccionario de "hojas" donde la hoja 0 será la que tenga los comentarios más recientes y así sucesivamente, y se devuelve un objeto HTTP con la plantilla html y el diccionario.


\section{Diseño e implementación del front-end}

	\subsection{Nuevos dashboards}
	
Como se ha comentado en el apartado anterior, diseño e implementación del back-end, hemos diseñado nuevas plantillas para mostrar el resultado de los análisis. Inicialmente se mostraba lo siguiente:
	 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=10cm, keepaspectratio]{img/dashboard1.jpg}
 		 \caption{Primera version del dashboard.}
 		 \label{fig:Primera version del dashboard.}
	\end{figure}
	
En esa pantalla se mostraba la puntuación total sobre 21 de pensamiento computacional, puntuación parcial de cada habilidad de programación y si hay malas prácticas. 
Después decidimos mostrar diferentes pantallas en función del nivel (si es bajo, medio o alto), por lo que diseñamos las siguientes pantallas

(FIXME: incluir las versiones anteriores.)

Finalmente, rediseñamos los dashboards de tal manera que se simplificara lo máximo posible las pantallas con el fin de ver, de un vistazo, la información más importante. 

 \begin{figure}[H]
  		\centering
 		 \includegraphics[width=5cm, keepaspectratio]{img/basico.jpg}
		 \includegraphics[width=5cm, keepaspectratio]{img/medio.jpg}
		 \includegraphics[width=5cm, keepaspectratio]{img/alto.jpg}
 		 \caption{Ultima version del dashboard.}
 		 \label{fig:Ultima version del dashboard.}
	\end{figure}
En las imágenes de arriba vemos los dashboards asociados a cada nivel: básico, medio y alto (de izquierda a derecha). Para el nivel básico se muestra sólo la puntuación de las habilidades de programación, para el nivel medio, mostramos además de eso, dos malas prácticas que corregir y al nivel alto le mostramos todo. A esa versión final se le ha añadido:
	\begin{itemize}
			\item Enlaces a páginas de ayuda, donde los usuarios pueden encontrar pequeñas guías para subir de nivel. 
			\item Una pequeña ayuda descriptiva en la que se explica cada sección del dashboard. Esta parte ha sido hecha con BootstrapTour \footnote{\url{http://bootstraptour.com}}.
			 \begin{figure}[H]
  				\centering
 		 			\includegraphics[width=10cm, keepaspectratio]{img/tour.jpg}
 		 			\caption{BootstrapTour.}
 		 			\label{fig:BootstrapTour.}
			\end{figure}
			\item Posibilidad de publicar en Twitter tu puntuación \footnote{\url{https://about.twitter.com/es/resources/buttons}}
			 \begin{figure}[H]
  				\centering
 		 			\includegraphics[width=10cm, keepaspectratio]{img/tweet.jpg}
 		 			\caption{Twitter.}
 		 			\label{fig:Twitter.}
			\end{figure}
			\item Diplomas. Cada vez que el usuario analiza un proyecto, tiene la posibilidad de descargarse un diploma con la puntuación obtenida:
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=10cm, keepaspectratio]{img/diploma.jpg}
 		 			\caption{Diploma.}
 		 			\label{fig:Diploma.}
			\end{figure}
			Dicho diploma se forma gracias al script Pyploma (modificado) y mediante LaTeX.
			\item Si el usuario ha analizado el proyecto vía URL, puede volver a él fácilmente:
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=5cm, keepaspectratio]{img/vuelve_a_tu_proyecto.jpg}
 		 			\caption{Link para volver a Scratch.}
 		 			\label{fig:Link para volver a Scratch.}
			\end{figure}
			\item Popups que informan de las malas prácticas.
			\item Gamificación: en todas aquellas habilidades de programación donde ha obtenido 3/3, la barra de progreso se torna verde y se le añade una estrella.
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=5cm, keepaspectratio]{img/gamificacion.jpg}
 		 			\caption{Gamificacion.}
 		 			\label{fig:Gamificacion.}
			\end{figure}
	\end{itemize}

\subsection{Páginas de ayuda}

En los talleres realizados para profesores y alumnos, nos sugirieron tener algún tipo de ayuda para poder subir de puntuación. Por ello, creamos una serie de páginas de consulta en las que se podría aprender en qué consiste cada habilidad y malas prácticas y cómo mejorar. 
Los enlaces a estas páginas se muestran al analizar un proyecto:
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=5cm, keepaspectratio]{img/pag_ayuda.jpg}
 		 			\caption{Acceso a páginas de ayuda.}
 		 			\label{fig:Acceso a páginas de ayuda.}
			\end{figure}
En el ejemplo, si quisiéramos mejorar la habilidad "Control de flujo" pincharíamos sobre el y veríamos lo siguiente:
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=7cm, keepaspectratio]{img/pag_ayuda1.jpg}
					\includegraphics[width=7cm, keepaspectratio]{img/pag_ayuda2.jpg}
 		 			\caption{Acceso a páginas de ayuda.}
 		 			\label{fig:Acceso a páginas de ayuda.}
			\end{figure}
Se muestran tres apartados para subir de 0 a 1, de 1 a 2 y de 2 a 3. En cada apartado veremos ejemplos visuales de lo que el usuario podría hacer para subir de puntuación en esa habilidad, y algunas explicaciones sobre los bloque que se utilizan en el ejemplo. 
Para mostrar los bloques hemos utilizado una librería llamada Scratch blocks\footnote{\url{https://github.com/tjvr/scratchblocks}} que nos permite generar bloques de Scratch desde la plantilla HTML.
Scratch blocks tiene una sintaxis muy parecida a la de sus bloques y está disponible para numerosos idiomas. Por ejemplo si quisiéramos mostrar el bloque "al presionar bandera verde" sólo tendríamos que escribir:

\begingroup
		\fontsize{7pt}{8pt}\selectfont
			\begin{verbatim}
<pre class="blocks">al presionar bandera verde
</pre>    			
			\end{verbatim}
	\endgroup
Sin embargo, como Dr. Scratch está disponible también en más idiomas, escribimos los bloques en inglés y posteriormente se traducen:

\begingroup
		\fontsize{7pt}{8pt}\selectfont
			\begin{verbatim}
<pre class="blocks">{% trans "when gf clicked" %}
</pre>    			
			\end{verbatim}
	\endgroup

\subsection{Estadísticas}
Para mostrar las estadísticas generadas en forma de gráficas, optamos por usar Highcharts\footnote{\url{http://www.highcharts.com}} dado que dispone de muchos tipos de gráficas y se adapta
bien a lenguaje de plantillas de Django. Las estadísticas que se muestran son:
	\begin{itemize}
		\item Puntuación media diaria.
		\item Porcentaje de niveles.
		\item Número de proyectos analizados cada día.
		\item Puntuación media por habilidad.
		\item Puntuación media por mal hábito.
	\end{itemize}
	Todas estas estadísticas se generan 
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=8cm, keepaspectratio]{img/stats1.jpg}
 		 			\caption{Puntuacion media diaria.}
 		 			\label{fig:Puntuacion media diaria.}
			\end{figure}
			\begin{figure}[H]
  				\centering
 		 			\includegraphics[width=8cm, keepaspectratio]{img/stats2.jpg}
 		 			\caption{Gamificacion.}
 		 			\label{fig:Gamificacion.}
			\end{figure}

\subsection{Organizaciones}
\subsection{Validación de formularios vía AJAX}
\subsection{Foro}

\section{Base de datos}
\label{sec:arquitectura}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% RESULTADOS %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Resultados}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CONCLUSIONES %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Conclusiones}
\label{chap:conclusiones}


\section{Consecución de objetivos}
\label{sec:consecucion-objetivos}

Esta sección es la sección espejo de las dos primeras del capítulo de objetivos,
donde se planteaba el objetivo general y se elaboraban los específicos.

Es aquí donde hay que debatir qué se ha conseguido y qué no. Cuando algo no
se ha conseguido, se ha de justificar, en términos de qué problemas se han
encontrado y qué medidas se han tomado para mitigar esos problemas.


\section{Aplicación de lo aprendido}
\label{sec:aplicacion}

En el proyecto he aplicado los conocimientos aprendidos de las siguientes asignaturas:
\begin{enumerate}
  \item Protocolos para la transmisión de audio y video en internet: en esta asignatura aprendí a programar en Python, entre otras cosas.
  \item Laboratorio de tecnologías audiovisuales en la web: en esta asignatura aprendí a crear mi primer proyecto en Django.
\end{enumerate}


\section{Lecciones aprendidas}
\label{sec:lecciones_aprendidas}

En este proyecto he aprendido numerosas cosas:

\begin{enumerate}
  \item Gestión y trabajo en equipo. La coordinación y la ayuda entre compañeros ha sido la clave para que el proyecto se desarrollara con éxito. Dicha coordinación se ha llevado a cabo principalmente por la herramienta Trello y gracias a videoconferencias semanales.
  \item Realizar eventos y workshops. Gracias a la realización de numerosos talleres, he aprendido a hablar en público y he perdido el miedo (y la vergüenza) que ello supone. También he podido ver cómo aprende un niño a programar. Este punto ha sido el más emocionante para mí.
   \item Administración del servidor. Aquí he aprendido que hay varios entornos de desarrollo en un proyecto de software. Dr. Scratch cuenta con dos: preproducción (entornos de pruebas) y producción (entorno real). Este punto es muy importante ya que las pruebas han ocupado casi el 80\% del tiempo. He aprendido a poner en marcha un servidor Apache con Django y a realizar actualizaciones en él.
   \item Usabilidad  y diseño web. Una de las cosas más importantes a la hora de crear una web orientada a los niños es que sea fácil de usar. Por ello hemos creado pantallas sencillas, con colores pastel y combinando las distintas componentes de Bootstrap para su fácil uso.
  \end{enumerate}


\section{Trabajos futuros}
\label{sec:trabajos_futuros}
Dr. Scratch puede ser extendido y optimizado de muchas formas:

\begin{enumerate}
  \item Cuentas de profesores. Actualmente existen en Dr. Scratch cuentas de usuarios y organizaciones. Una buena vía para seguir desarrollando y mejorando Dr. Scratch es creando cuentas para profesores donde éstos puedan agrupar a sus alumnos y ver su progreso. En estas cuentas podrían crear las cuentas de sus alumnos, ver quién va mejor o peor, sacar estadísticas. Semanalmente se podría poner un apartado de actividades, en el que Dr. Scratch sugerirá actividades para trabajar en clase algunas competencias de pensamiento computacional. 
   \item Crear una red social dentro de Dr. Scratch. Esto incrementará el grado de gamificación que actualmente tiene la web. Los usuarios tendrían la posibilidad de comentar las puntuaciones de sus amigos, lanzarse retos entre ellos, e incluso se podría incluir algún juego online por parejas o grupos en el que se practique lo que se sabe sobre pensamiento computacional. 
   \item Aplicación móvil. En esta aplicación se podría acceder a la cuenta de usuario y consultar las medallas o retos que nuestros amigos nos han lanzado.
   \item Migración a Python 3 y optimización de código.
   \item Dr. AppInventor. Una vez que un niño aprende Scratch y siente la necesidad de aprender otra cosa, puede ser bueno pasar a AppInventor. Para aprender a programar correctamente en AppInventor sería una gran idea disponer de un analizador como el de Dr. Scratch.
\end{enumerate}


\section{Valoración personal}
\label{sec:valoracion}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% APÉNDICE(S) %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\appendix
\chapter{Manual de usuario}
\label{app:manual}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% BIBLIOGRAFIA %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage

% Las siguientes dos instrucciones es todo lo que necesitas
% para incluir las citas en la memoria
\bibliographystyle{abbrv}
\bibliography{memoria}  % memoria.bib es el nombre del fichero que contiene
% las referencias bibliográficas. Abre ese fichero y mira el formato que tiene,
% que se conoce como BibTeX. Hay muchos sitios que exportan referencias en
% formato BibTeX. Prueba a buscar en http://scholar.google.com por referencias
% y verás que lo puedes hacer de manera sencilla.
% Más información: 
% http://texblog.org/2014/04/22/using-google-scholar-to-download-bibtex-citations/

\end{document}
